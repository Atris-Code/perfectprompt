Documento: El JSON Payload_ InsightCardResponse.pdf
================================================================================


--- Página 1 ---
Aquí
 
tienes
 
el
 
diseño
 
detallado
 
del
 
JSON
 
Payload
.
 
Este
 
objeto
 
es
 
lo
 
que
 
tu
 
Frontend
 
(React/Vue/Angular)
 
recibirá
 
una
 
vez
 
que
 
el
 
Backend
 
haya
 
procesado
 
los
 
datos
 
y
 
generado
 
la
 
imagen.
 
Está
 
estructurado
 
para
 
ser
 
"UI-Agnostic"
 
pero
 
"UI-Aware"
:
 
contiene
 
los
 
datos
 
puros,
 
pero
 
también
 
"pistas"
 
de
 
diseño
 
(
ui_hints
)
 
para
 
que
 
tu
 
interfaz
 
sepa
 
qué
 
colores
 
neón
 
usar
 
sin
 
tener
 
lógica
 
compleja
 
en
 
el
 
lado
 
del
 
cliente.
 
El
 
JSON
 
Payload:
 
InsightCardResponse
 
JSON
 
{
 
  
"meta":
 
{
 
    
"request_id":
 
"req_xf92_pyro_01",
 
    
"timestamp":
 
"2023-10-27T14:35:00Z",
 
    
"status":
 
"success",
 
    
"generated_for_role":
 
"INVESTOR"
 
  
},
 
  
"visual_asset":
 
{
 
    
"type":
 
"image/png",
 
    
"url":
 
"https://storage.pyrolysis-hub.com/gen/img_9982_dark_turbine.png",
 
    
"alt_text":
 
"Isometría
 
3D
 
de
 
una
 
turbina
 
de
 
materia
 
oscura
 
con
 
núcleo
 
brillante
 
cian,
 
representando
 
alta
 
eficiencia.",
 
    
"prompt_used":
 
"Subject:
 
frictionless,
 
superconducting...
 
[truncated
 
for
 
UI]",
 
    
"aspect_ratio":
 
"16:9"
 
  
},
 
  
"narrative_content":
 
{
 
    
"headline":
 
"Eficiencia
 
Financiera
 
Sobresaliente",
 
    
"sub_headline":
 
"Operación
 
al
 
40%
 
por
 
debajo
 
del
 
coste
 
de
 
mercado.",
 
    
"body_markdown":
 
"El
 
análisis
 
de
 
flujo
 
energético
 
actual
 
muestra
 
una
 
**sinergia
 
óptima**.
 
La
 
tarifa
 
de
 
**0,06
 
€/kWh**
 
actúa
 
como
 
un
 
catalizador
 
financiero,
 
permitiendo
 
una
 
proyección
 
de
 
ahorro
 
anual
 
significativa
 
frente
 
a
 
los
 
estándares
 
del
 
sector
 
industrial.",
 
    
"call_to_action":
 
"Recomendamos
 
congelar
 
la
 
tarifa
 
actual.",
 
    
"highlighted_metrics":
 
[
 
      
{
 
        
"label":
 
"Tarifa",
 
        
"value":
 
"0,06
 
€/kWh",
 
        
"trend":
 
"positive"
 
      
},
 
      
{
 
        
"label":
 
"Ahorro
 
Est.",
 
        
"value":
 
"40%",
 
        
"trend":
 
"positive"
 
--- Página 2 ---
      
}
 
    
]
 
  
},
 
  
"ui_hints":
 
{
 
    
"theme_mode":
 
"dark_cyberpunk",
 
    
"primary_color_hex":
 
"#00D4FF",
 
 
    
"secondary_color_hex":
 
"#FFC107",
 
 
    
"card_border_style":
 
"glowing_cyan",
 
 
    
"icon":
 
"lightning-bolt-shield"
 
  
},
 
  
"available_actions":
 
[
 
    
{
 
      
"id":
 
"download_pdf",
 
      
"label":
 
"Descargar
 
Reporte",
 
      
"icon":
 
"download"
 
    
},
 
    
{
 
      
"id":
 
"share_linkedin",
 
      
"label":
 
"Publicar
 
Hito",
 
      
"icon":
 
"share"
 
    
}
 
  
]
 
}
 
 
 
Mapeo
 
del
 
JSON
 
a
 
la
 
Interfaz
 
(Tarjeta
 
de
 
Insight)
 
Para
 
que
 
visualices
 
cómo
 
este
 
código
 
se
 
transforma
 
en
 
píxeles,
 
he
 
preparado
 
este
 
esquema
 
de
 
renderizado.
 
Imagina
 
esto
 
como
 
una
 
nueva
 
tarjeta
 
que
 
aparece
 
flotando
 
sobre
 
tu
 
dashboard
 
principal.
 
1.
 
Encabezado
 
de
 
la
 
Tarjeta
 
(Badge
 
&
 
Título)
 
●
 
Datos
 
usados:
 
ui_hints.icon
,
 
narrative_content.headline
 
●
 
Comportamiento:
 
El
 
icono
 
(un
 
rayo
 
protegido)
 
brilla
 
en
 
color
 
#00D4FF
 
(Cian).
 
El
 
título
 
"Eficiencia
 
Financiera
 
Sobresaliente"
 
aparece
 
en
 
negrita
 
blanca.
 
2.
 
El
 
"Hero
 
Image"
 
(Visualización)
 
●
 
Datos
 
usados:
 
visual_asset.url
 
●
 
Comportamiento:
 
La
 
imagen
 
generada
 
(la
 
turbina
 
oscura
 
con
 
núcleo
 
brillante)
 
ocupa
 
el
 
centro.
 
Al
 
pasar
 
el
 
mouse
 
por
 
encima
 
(hover),
 
aparece
 
un
 
pequeño
 
tooltip
 
con
 
el
 
--- Página 3 ---
visual_asset.prompt_used
,
 
permitiendo
 
al
 
usuario
 
ver
 
cómo
 
la
 
IA
 
"imaginó"
 
los
 
datos.
 
3.
 
Cuerpo
 
Narrativo
 
(La
 
Historia)
 
●
 
Datos
 
usados:
 
narrative_content.body_markdown
 
●
 
Comportamiento:
 
Se
 
renderiza
 
el
 
texto.
 
La
 
parte
 
"
sinergia
 
óptima
"
 
aparece
 
resaltada
 
automáticamente
 
gracias
 
al
 
Markdown.
 
4.
 
Chips
 
de
 
Datos
 
(Badges)
 
●
 
Datos
 
usados:
 
narrative_content.highlighted_metrics
 
●
 
Comportamiento:
 
Dos
 
pequeñas
 
píldoras
 
flotantes
 
sobre
 
la
 
imagen
 
o
 
debajo
 
del
 
texto:
 
○
 
[
 
0,06
 
€/kWh
 
⬆
 
]
 
(Color
 
verde/cian
 
indicando
 
positivo)
 
○
 
[
 
40%
 
Ahorro
 
⬆
 
]
 
5.
 
Botonera
 
de
 
Acción
 
(Footer)
 
●
 
Datos
 
usados:
 
available_actions
 
●
 
Comportamiento:
 
Botones
 
estilizados
 
(Ghost
 
buttons)
 
que
 
permiten
 
llevar
 
este
 
insight
 
fuera
 
de
 
la
 
plataforma.
 
 
Ejemplo
 
de
 
Implementación
 
(React
 
Component
 
Dummy)
 
Así
 
es
 
como
 
tu
 
desarrollador
 
Frontend
 
consumirá
 
este
 
JSON.
 
Es
 
muy
 
limpio
 
porque
 
la
 
lógica
 
de
 
"qué
 
color
 
usar"
 
ya
 
viene
 
decidida
 
desde
 
el
 
backend.
 
JavaScript
 
const
 
InsightCard
 
=
 
({
 
data
 
})
 
=>
 
{
 
  
//
 
data
 
=
 
el
 
JSON
 
de
 
arriba
 
  
 
  
const
 
cardStyle
 
=
 
{
 
    
borderColor:
 
data.ui_hints.primary_color_hex,
 
    
boxShadow:
 
`0
 
0
 
15px
 
${data.ui_hints.primary_color_hex}40`
 
//
 
Glow
 
effect
 
  
};
 
 
  
return
 
(
 
    
<div
 
className="insight-card-container"
 
style={cardStyle}>
 
      
 
      
{/*
 
Header
 
*/}
 
      
<div
 
className="card-header">
 
        
<Icon
 
name={data.ui_hints.icon}
 
color={data.ui_hints.primary_color_hex}
 
/>
 
        
<h3>{data.narrative_content.headline}</h3>
 
--- Página 4 ---
      
</div>
 
 
      
{/*
 
Image
 
with
 
Prompt
 
Reveal
 
*/}
 
      
<div
 
className="card-image">
 
        
<img
 
src={data.visual_asset.url}
 
alt={data.visual_asset.alt_text}
 
/>
 
        
<div
 
className="prompt-overlay">
 
           
<small>{data.visual_asset.prompt_used}</small>
 
        
</div>
 
      
</div>
 
 
      
{/*
 
Narrative
 
*/}
 
      
<div
 
className="card-body">
 
        
<ReactMarkdown>{data.narrative_content.body_markdown}</ReactMarkdown>
 
        
 
        
{/*
 
Metrics
 
Chips
 
*/}
 
        
<div
 
className="metrics-row">
 
          
{data.narrative_content.highlighted_metrics.map(metric
 
=>
 
(
 
             
<span
 
className={`badge
 
${metric.trend}`}>
 
               
{metric.label}:
 
<b>{metric.value}</b>
 
             
</span>
 
          
))}
 
        
</div>
 
      
</div>
 
 
      
{/*
 
Actions
 
*/}
 
      
<div
 
className="card-footer">
 
         
{data.available_actions.map(action
 
=>
 
(
 
            
<button
 
key={action.id}
 
onClick={()
 
=>
 
handleAction(action.id)}>
 
               
{action.label}
 
            
</button>
 
         
))}
 
      
</div>
 
    
</div>
 
  
);
 
};
 
 